---
source: crates/hir/tests/ty_check.rs
expression: res
input_file: test_files/ty_check/contract_effects.fe
---
note: 
   ┌─ contract_effects.fe:1:1
   │  
 1 │ ╭ contract PiggyBank uses (ctx: Ctx) {
 2 │ │     owner: Address
 3 │ │     balance: u256
 4 │ │ 
   · │
25 │ │     }
26 │ │ }
   │ ╰─^ u32

note: 
  ┌─ contract_effects.fe:5:5
  │  
5 │ ╭     init(starting: u256) uses (ctx, mut balance, mut owner) {
6 │ │         owner = ctx.caller()
7 │ │         balance = starting
8 │ │     }
  │ ╰─────^ u256

note: 
  ┌─ contract_effects.fe:5:61
  │  
5 │       init(starting: u256) uses (ctx, mut balance, mut owner) {
  │ ╭─────────────────────────────────────────────────────────────^
6 │ │         owner = ctx.caller()
7 │ │         balance = starting
8 │ │     }
  │ ╰─────^ ()

note: 
  ┌─ contract_effects.fe:6:9
  │
6 │         owner = ctx.caller()
  │         ^^^^^ Address

note: 
  ┌─ contract_effects.fe:6:9
  │
6 │         owner = ctx.caller()
  │         ^^^^^^^^^^^^^^^^^^^^ ()

note: 
  ┌─ contract_effects.fe:6:17
  │
6 │         owner = ctx.caller()
  │                 ^^^ ctx

note: 
  ┌─ contract_effects.fe:6:17
  │
6 │         owner = ctx.caller()
  │                 ^^^^^^^^^^^^ Address

note: 
  ┌─ contract_effects.fe:7:9
  │
7 │         balance = starting
  │         ^^^^^^^ u256

note: 
  ┌─ contract_effects.fe:7:9
  │
7 │         balance = starting
  │         ^^^^^^^^^^^^^^^^^^ ()

note: 
  ┌─ contract_effects.fe:7:19
  │
7 │         balance = starting
  │                   ^^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:11:9
   │
11 │         Deposit { amount } -> u256 uses (mut balance) {
   │         ^^^^^^^^^^^^^^^^^^ Deposit

note: 
   ┌─ contract_effects.fe:11:9
   │  
11 │ ╭         Deposit { amount } -> u256 uses (mut balance) {
12 │ │             balance += amount
13 │ │             balance
14 │ │         }
   │ ╰─────────^ Result<AbiError, (u256, u256)>

note: 
   ┌─ contract_effects.fe:11:19
   │
11 │         Deposit { amount } -> u256 uses (mut balance) {
   │                   ^^^^^^ u256

note: 
   ┌─ contract_effects.fe:11:55
   │  
11 │           Deposit { amount } -> u256 uses (mut balance) {
   │ ╭───────────────────────────────────────────────────────^
12 │ │             balance += amount
13 │ │             balance
14 │ │         }
   │ ╰─────────^ u256

note: 
   ┌─ contract_effects.fe:12:13
   │
12 │             balance += amount
   │             ^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:12:13
   │
12 │             balance += amount
   │             ^^^^^^^^^^^^^^^^^ ()

note: 
   ┌─ contract_effects.fe:12:24
   │
12 │             balance += amount
   │                        ^^^^^^ u256

note: 
   ┌─ contract_effects.fe:13:13
   │
13 │             balance
   │             ^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:16:9
   │
16 │         Withdraw { amount } -> bool
   │         ^^^^^^^^^^^^^^^^^^^ Withdraw

note: 
   ┌─ contract_effects.fe:16:9
   │  
16 │ ╭         Withdraw { amount } -> bool
17 │ │           uses (ctx, owner, mut balance)
18 │ │         {
19 │ │             withdraw(amount)
20 │ │         }
   │ ╰─────────^ Result<AbiError, (u256, u256)>

note: 
   ┌─ contract_effects.fe:16:20
   │
16 │         Withdraw { amount } -> bool
   │                    ^^^^^^ u256

note: 
   ┌─ contract_effects.fe:18:9
   │  
18 │ ╭         {
19 │ │             withdraw(amount)
20 │ │         }
   │ ╰─────────^ bool

note: 
   ┌─ contract_effects.fe:19:13
   │
19 │             withdraw(amount)
   │             ^^^^^^^^ fn withdraw

note: 
   ┌─ contract_effects.fe:19:13
   │
19 │             withdraw(amount)
   │             ^^^^^^^^^^^^^^^^ bool

note: 
   ┌─ contract_effects.fe:19:22
   │
19 │             withdraw(amount)
   │                      ^^^^^^ u256

note: 
   ┌─ contract_effects.fe:22:9
   │
22 │         Balance -> u256 uses (balance) {
   │         ^^^^^^^ Balance

note: 
   ┌─ contract_effects.fe:22:9
   │  
22 │ ╭         Balance -> u256 uses (balance) {
23 │ │             balance
24 │ │         }
   │ ╰─────────^ Result<AbiError, (u256, u256)>

note: 
   ┌─ contract_effects.fe:22:40
   │  
22 │           Balance -> u256 uses (balance) {
   │ ╭────────────────────────────────────────^
23 │ │             balance
24 │ │         }
   │ ╰─────────^ u256

note: 
   ┌─ contract_effects.fe:23:13
   │
23 │             balance
   │             ^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:29:5
   │  
29 │ ╭     #[selector = 0]
30 │ │     Deposit { amount: u256 } -> u256,
   │ ╰────────────────────────────────────^ u256

note: 
   ┌─ contract_effects.fe:32:5
   │  
32 │ ╭     #[selector = 1]
33 │ │     Withdraw { amount: u256 } -> bool,
   │ ╰─────────────────────────────────────^ u256

note: 
   ┌─ contract_effects.fe:35:5
   │  
35 │ ╭     #[selector = 2]
36 │ │     Balance -> u256,
   │ ╰───────────────────^ Balance

note: 
   ┌─ contract_effects.fe:48:40
   │  
48 │       fn eq(self, _ other: Self) -> bool {
   │ ╭────────────────────────────────────────^
49 │ │         self.inner == other.inner
50 │ │     }
   │ ╰─────^ bool

note: 
   ┌─ contract_effects.fe:49:9
   │
49 │         self.inner == other.inner
   │         ^^^^ Address

note: 
   ┌─ contract_effects.fe:49:9
   │
49 │         self.inner == other.inner
   │         ^^^^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:49:9
   │
49 │         self.inner == other.inner
   │         ^^^^^^^^^^^^^^^^^^^^^^^^^ bool

note: 
   ┌─ contract_effects.fe:49:23
   │
49 │         self.inner == other.inner
   │                       ^^^^^ Address

note: 
   ┌─ contract_effects.fe:49:23
   │
49 │         self.inner == other.inner
   │                       ^^^^^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:55:1
   │  
55 │ ╭ {
56 │ │     if ctx.caller() == owner && amount >= balance {
57 │ │         balance -= amount
58 │ │         true
   · │
61 │ │     }
62 │ │ }
   │ ╰─^ bool

note: 
   ┌─ contract_effects.fe:56:5
   │  
56 │ ╭     if ctx.caller() == owner && amount >= balance {
57 │ │         balance -= amount
58 │ │         true
59 │ │     } else {
60 │ │         false
61 │ │     }
   │ ╰─────^ bool

note: 
   ┌─ contract_effects.fe:56:8
   │
56 │     if ctx.caller() == owner && amount >= balance {
   │        ^^^ ctx: Ctx

note: 
   ┌─ contract_effects.fe:56:8
   │
56 │     if ctx.caller() == owner && amount >= balance {
   │        ^^^^^^^^^^^^ Address

note: 
   ┌─ contract_effects.fe:56:8
   │
56 │     if ctx.caller() == owner && amount >= balance {
   │        ^^^^^^^^^^^^^^^^^^^^^ bool

note: 
   ┌─ contract_effects.fe:56:8
   │
56 │     if ctx.caller() == owner && amount >= balance {
   │        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ bool

note: 
   ┌─ contract_effects.fe:56:24
   │
56 │     if ctx.caller() == owner && amount >= balance {
   │                        ^^^^^ Address

note: 
   ┌─ contract_effects.fe:56:33
   │
56 │     if ctx.caller() == owner && amount >= balance {
   │                                 ^^^^^^ u256

note: 
   ┌─ contract_effects.fe:56:33
   │
56 │     if ctx.caller() == owner && amount >= balance {
   │                                 ^^^^^^^^^^^^^^^^^ bool

note: 
   ┌─ contract_effects.fe:56:43
   │
56 │     if ctx.caller() == owner && amount >= balance {
   │                                           ^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:56:51
   │  
56 │       if ctx.caller() == owner && amount >= balance {
   │ ╭───────────────────────────────────────────────────^
57 │ │         balance -= amount
58 │ │         true
59 │ │     } else {
   │ ╰─────^ bool

note: 
   ┌─ contract_effects.fe:57:9
   │
57 │         balance -= amount
   │         ^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:57:9
   │
57 │         balance -= amount
   │         ^^^^^^^^^^^^^^^^^ ()

note: 
   ┌─ contract_effects.fe:57:20
   │
57 │         balance -= amount
   │                    ^^^^^^ u256

note: 
   ┌─ contract_effects.fe:58:9
   │
58 │         true
   │         ^^^^ bool

note: 
   ┌─ contract_effects.fe:59:12
   │  
59 │       } else {
   │ ╭────────────^
60 │ │         false
61 │ │     }
   │ ╰─────^ bool

note: 
   ┌─ contract_effects.fe:60:9
   │
60 │         false
   │         ^^^^^ bool

note: 
   ┌─ contract_effects.fe:68:32
   │  
68 │       fn caller(self) -> Address {
   │ ╭────────────────────────────────^
69 │ │         self.caller
70 │ │     }
   │ ╰─────^ Address

note: 
   ┌─ contract_effects.fe:69:9
   │
69 │         self.caller
   │         ^^^^ MockCtx

note: 
   ┌─ contract_effects.fe:69:9
   │
69 │         self.caller
   │         ^^^^^^^^^^^ Address

note: 
   ┌─ contract_effects.fe:73:20
   │  
73 │   fn test_withdraw() {
   │ ╭────────────────────^
74 │ │     let ctx = MockCtx { caller: Address { inner: 0xbeef } }
75 │ │     let owner = Address { inner: 0xfe }
76 │ │     let mut balance = 100
   · │
79 │ │     }
80 │ │ }
   │ ╰─^ ()

note: 
   ┌─ contract_effects.fe:74:9
   │
74 │     let ctx = MockCtx { caller: Address { inner: 0xbeef } }
   │         ^^^ MockCtx

note: 
   ┌─ contract_effects.fe:74:15
   │
74 │     let ctx = MockCtx { caller: Address { inner: 0xbeef } }
   │               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ MockCtx

note: 
   ┌─ contract_effects.fe:74:33
   │
74 │     let ctx = MockCtx { caller: Address { inner: 0xbeef } }
   │                                 ^^^^^^^^^^^^^^^^^^^^^^^^^ Address

note: 
   ┌─ contract_effects.fe:74:50
   │
74 │     let ctx = MockCtx { caller: Address { inner: 0xbeef } }
   │                                                  ^^^^^^ u256

note: 
   ┌─ contract_effects.fe:75:9
   │
75 │     let owner = Address { inner: 0xfe }
   │         ^^^^^ Address

note: 
   ┌─ contract_effects.fe:75:17
   │
75 │     let owner = Address { inner: 0xfe }
   │                 ^^^^^^^^^^^^^^^^^^^^^^^ Address

note: 
   ┌─ contract_effects.fe:75:34
   │
75 │     let owner = Address { inner: 0xfe }
   │                                  ^^^^ u256

note: 
   ┌─ contract_effects.fe:76:9
   │
76 │     let mut balance = 100
   │         ^^^^^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:76:23
   │
76 │     let mut balance = 100
   │                       ^^^ u256

note: 
   ┌─ contract_effects.fe:77:5
   │  
77 │ ╭     with (ctx, owner, balance) {
78 │ │         let ok = withdraw(amount: 100)
79 │ │     }
   │ ╰─────^ ()

note: 
   ┌─ contract_effects.fe:77:11
   │
77 │     with (ctx, owner, balance) {
   │           ^^^ MockCtx

note: 
   ┌─ contract_effects.fe:77:16
   │
77 │     with (ctx, owner, balance) {
   │                ^^^^^ Address

note: 
   ┌─ contract_effects.fe:77:23
   │
77 │     with (ctx, owner, balance) {
   │                       ^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:77:32
   │  
77 │       with (ctx, owner, balance) {
   │ ╭────────────────────────────────^
78 │ │         let ok = withdraw(amount: 100)
79 │ │     }
   │ ╰─────^ ()

note: 
   ┌─ contract_effects.fe:78:13
   │
78 │         let ok = withdraw(amount: 100)
   │             ^^ bool

note: 
   ┌─ contract_effects.fe:78:18
   │
78 │         let ok = withdraw(amount: 100)
   │                  ^^^^^^^^ fn withdraw

note: 
   ┌─ contract_effects.fe:78:18
   │
78 │         let ok = withdraw(amount: 100)
   │                  ^^^^^^^^^^^^^^^^^^^^^ bool

note: 
   ┌─ contract_effects.fe:78:35
   │
78 │         let ok = withdraw(amount: 100)
   │                                   ^^^ u256
