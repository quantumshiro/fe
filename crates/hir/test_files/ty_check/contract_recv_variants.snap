---
source: crates/hir/tests/ty_check.rs
expression: res
input_file: test_files/ty_check/contract_recv_variants.fe
---
note: 
   ┌─ contract_recv_variants.fe:10:5
   │  
10 │ ╭     #[selector = 0x01]
11 │ │     Deposit { amount: u64 } -> u64,
   │ ╰──────────────────────────────────^ u64

note: 
   ┌─ contract_recv_variants.fe:12:5
   │  
12 │ ╭     #[selector = 0x02]
13 │ │     Withdraw { amount: u64 } -> bool,
   │ ╰────────────────────────────────────^ u64

note: 
   ┌─ contract_recv_variants.fe:62:61
   │  
62 │       init(start_balance: u64) uses (mut balance, mut tokens) {
   │ ╭─────────────────────────────────────────────────────────────^
63 │ │         balance = start_balance
64 │ │         tokens = 0
65 │ │     }
   │ ╰─────^ ()

note: 
   ┌─ contract_recv_variants.fe:63:9
   │
63 │         balance = start_balance
   │         ^^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:63:9
   │
63 │         balance = start_balance
   │         ^^^^^^^^^^^^^^^^^^^^^^^ ()

note: 
   ┌─ contract_recv_variants.fe:63:19
   │
63 │         balance = start_balance
   │                   ^^^^^^^^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:64:9
   │
64 │         tokens = 0
   │         ^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:64:9
   │
64 │         tokens = 0
   │         ^^^^^^^^^^ ()

note: 
   ┌─ contract_recv_variants.fe:64:18
   │
64 │         tokens = 0
   │                  ^ u64

note: 
   ┌─ contract_recv_variants.fe:69:9
   │
69 │         Deposit { amount } -> u64 uses (mut balance) {
   │         ^^^^^^^^^^^^^^^^^^ Deposit

note: 
   ┌─ contract_recv_variants.fe:69:19
   │
69 │         Deposit { amount } -> u64 uses (mut balance) {
   │                   ^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:69:54
   │  
69 │           Deposit { amount } -> u64 uses (mut balance) {
   │ ╭──────────────────────────────────────────────────────^
70 │ │             balance += amount
71 │ │             balance
72 │ │         }
   │ ╰─────────^ u64

note: 
   ┌─ contract_recv_variants.fe:70:13
   │
70 │             balance += amount
   │             ^^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:70:13
   │
70 │             balance += amount
   │             ^^^^^^^^^^^^^^^^^ ()

note: 
   ┌─ contract_recv_variants.fe:70:24
   │
70 │             balance += amount
   │                        ^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:71:13
   │
71 │             balance
   │             ^^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:73:9
   │
73 │         Withdraw { amount } -> bool uses (mut balance) {
   │         ^^^^^^^^^^^^^^^^^^^ Withdraw

note: 
   ┌─ contract_recv_variants.fe:73:20
   │
73 │         Withdraw { amount } -> bool uses (mut balance) {
   │                    ^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:73:56
   │  
73 │           Withdraw { amount } -> bool uses (mut balance) {
   │ ╭────────────────────────────────────────────────────────^
74 │ │             if amount > balance {
75 │ │                 false
76 │ │             } else {
   · │
79 │ │             }
80 │ │         }
   │ ╰─────────^ bool

note: 
   ┌─ contract_recv_variants.fe:74:13
   │  
74 │ ╭             if amount > balance {
75 │ │                 false
76 │ │             } else {
77 │ │                 balance -= amount
78 │ │                 true
79 │ │             }
   │ ╰─────────────^ bool

note: 
   ┌─ contract_recv_variants.fe:74:16
   │
74 │             if amount > balance {
   │                ^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:74:16
   │
74 │             if amount > balance {
   │                ^^^^^^^^^^^^^^^^ bool

note: 
   ┌─ contract_recv_variants.fe:74:25
   │
74 │             if amount > balance {
   │                         ^^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:74:33
   │  
74 │               if amount > balance {
   │ ╭─────────────────────────────────^
75 │ │                 false
76 │ │             } else {
   │ ╰─────────────^ bool

note: 
   ┌─ contract_recv_variants.fe:75:17
   │
75 │                 false
   │                 ^^^^^ bool

note: 
   ┌─ contract_recv_variants.fe:76:20
   │  
76 │               } else {
   │ ╭────────────────────^
77 │ │                 balance -= amount
78 │ │                 true
79 │ │             }
   │ ╰─────────────^ bool

note: 
   ┌─ contract_recv_variants.fe:77:17
   │
77 │                 balance -= amount
   │                 ^^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:77:17
   │
77 │                 balance -= amount
   │                 ^^^^^^^^^^^^^^^^^ ()

note: 
   ┌─ contract_recv_variants.fe:77:28
   │
77 │                 balance -= amount
   │                            ^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:78:17
   │
78 │                 true
   │                 ^^^^ bool

note: 
   ┌─ contract_recv_variants.fe:85:9
   │
85 │         Transfer { to, amount } -> bool uses (mut tokens) {
   │         ^^^^^^^^^^^^^^^^^^^^^^^ Transfer

note: 
   ┌─ contract_recv_variants.fe:85:20
   │
85 │         Transfer { to, amount } -> bool uses (mut tokens) {
   │                    ^^ u64

note: 
   ┌─ contract_recv_variants.fe:85:24
   │
85 │         Transfer { to, amount } -> bool uses (mut tokens) {
   │                        ^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:85:59
   │  
85 │           Transfer { to, amount } -> bool uses (mut tokens) {
   │ ╭───────────────────────────────────────────────────────────^
86 │ │             if amount > tokens {
87 │ │                 false
88 │ │             } else {
   · │
91 │ │             }
92 │ │         }
   │ ╰─────────^ bool

note: 
   ┌─ contract_recv_variants.fe:86:13
   │  
86 │ ╭             if amount > tokens {
87 │ │                 false
88 │ │             } else {
89 │ │                 tokens -= amount
90 │ │                 true
91 │ │             }
   │ ╰─────────────^ bool

note: 
   ┌─ contract_recv_variants.fe:86:16
   │
86 │             if amount > tokens {
   │                ^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:86:16
   │
86 │             if amount > tokens {
   │                ^^^^^^^^^^^^^^^ bool

note: 
   ┌─ contract_recv_variants.fe:86:25
   │
86 │             if amount > tokens {
   │                         ^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:86:32
   │  
86 │               if amount > tokens {
   │ ╭────────────────────────────────^
87 │ │                 false
88 │ │             } else {
   │ ╰─────────────^ bool

note: 
   ┌─ contract_recv_variants.fe:87:17
   │
87 │                 false
   │                 ^^^^^ bool

note: 
   ┌─ contract_recv_variants.fe:88:20
   │  
88 │               } else {
   │ ╭────────────────────^
89 │ │                 tokens -= amount
90 │ │                 true
91 │ │             }
   │ ╰─────────────^ bool

note: 
   ┌─ contract_recv_variants.fe:89:17
   │
89 │                 tokens -= amount
   │                 ^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:89:17
   │
89 │                 tokens -= amount
   │                 ^^^^^^^^^^^^^^^^ ()

note: 
   ┌─ contract_recv_variants.fe:89:27
   │
89 │                 tokens -= amount
   │                           ^^^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:90:17
   │
90 │                 true
   │                 ^^^^ bool

note: 
   ┌─ contract_recv_variants.fe:93:9
   │
93 │         Balance { addr } -> u64 uses (tokens) {
   │         ^^^^^^^^^^^^^^^^ Balance

note: 
   ┌─ contract_recv_variants.fe:93:19
   │
93 │         Balance { addr } -> u64 uses (tokens) {
   │                   ^^^^ u64

note: 
   ┌─ contract_recv_variants.fe:93:47
   │  
93 │           Balance { addr } -> u64 uses (tokens) {
   │ ╭───────────────────────────────────────────────^
94 │ │             tokens
95 │ │         }
   │ ╰─────────^ u64

note: 
   ┌─ contract_recv_variants.fe:94:13
   │
94 │             tokens
   │             ^^^^^^ u64

note: 
    ┌─ contract_recv_variants.fe:100:9
    │
100 │         CustomQuery { key } -> u64 uses (balance, tokens) {
    │         ^^^^^^^^^^^^^^^^^^^ CustomQuery

note: 
    ┌─ contract_recv_variants.fe:100:23
    │
100 │         CustomQuery { key } -> u64 uses (balance, tokens) {
    │                       ^^^ u64

note: 
    ┌─ contract_recv_variants.fe:100:59
    │  
100 │           CustomQuery { key } -> u64 uses (balance, tokens) {
    │ ╭───────────────────────────────────────────────────────────^
101 │ │             if key == 0 {
102 │ │                 balance
103 │ │             } else {
104 │ │                 tokens
105 │ │             }
106 │ │         }
    │ ╰─────────^ u64

note: 
    ┌─ contract_recv_variants.fe:101:13
    │  
101 │ ╭             if key == 0 {
102 │ │                 balance
103 │ │             } else {
104 │ │                 tokens
105 │ │             }
    │ ╰─────────────^ u64

note: 
    ┌─ contract_recv_variants.fe:101:16
    │
101 │             if key == 0 {
    │                ^^^ u64

note: 
    ┌─ contract_recv_variants.fe:101:16
    │
101 │             if key == 0 {
    │                ^^^^^^^^ bool

note: 
    ┌─ contract_recv_variants.fe:101:23
    │
101 │             if key == 0 {
    │                       ^ u64

note: 
    ┌─ contract_recv_variants.fe:101:25
    │  
101 │               if key == 0 {
    │ ╭─────────────────────────^
102 │ │                 balance
103 │ │             } else {
    │ ╰─────────────^ u64

note: 
    ┌─ contract_recv_variants.fe:102:17
    │
102 │                 balance
    │                 ^^^^^^^ u64

note: 
    ┌─ contract_recv_variants.fe:103:20
    │  
103 │               } else {
    │ ╭────────────────────^
104 │ │                 tokens
105 │ │             }
    │ ╰─────────────^ u64

note: 
    ┌─ contract_recv_variants.fe:104:17
    │
104 │                 tokens
    │                 ^^^^^^ u64
