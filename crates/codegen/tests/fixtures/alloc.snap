---
source: crates/codegen/tests/yul.rs
assertion_line: 38
expression: output
input_file: tests/fixtures/alloc.fe
---
{
  function bump(size) -> ret {
    ret := alloc(size)
  }
}
{
  function bump_const() -> ret {
    ret := alloc(64)
  }
}
{
  function alloc(size) -> ret {
    let v0 := mload(FREE_MEMORY_PTR)
    if eq(v0, 0) {
      v0 := INITIAL_FREE_MEMORY
      mstore(FREE_MEMORY_PTR, add(v0, size))
      ret := v0
    }
    if iszero(eq(v0, 0)) {
      mstore(FREE_MEMORY_PTR, add(v0, size))
      ret := v0
    }
  }
}
